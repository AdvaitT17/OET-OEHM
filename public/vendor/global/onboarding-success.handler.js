document.addEventListener('DOMContentLoaded',function(){fetch('/user').then(response=>response.json()).then(data=>{var profilePicture=document.getElementById('profilePicture');if(profilePicture){profilePicture.src=data.user?data.user.profile_picture:'images/profile/default-profile.jpg';}document.getElementById('name').value=data.user?data.user.name:'';document.getElementById('email').value=data.user?data.user.email:'';}).catch(error=>console.error('Error fetching user data:',error));function updateUserData(field,value){fetch('/updateUserData',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({field:field,value:value})}).then(response=>response.json()).then(data=>{if(data.success){console.log(`${field} updated successfully`);}else{console.error(`Failed to update ${field}: ${data.message}`);}}).catch(error=>console.error('Error updating user data:',error));}document.getElementById('nextButton1').addEventListener('click',function(event){event.preventDefault();var isAcknowledged=document.getElementById('acknowledge').checked;if(!isAcknowledged){alert('Please confirm that the information you have entered is correct.');return;}var name=document.getElementById('name').value;var email=document.getElementById('email').value;var rollNumber=document.getElementById('zcode').value;var branch=document.getElementById('branchSelect').value;var semester=document.getElementById('semesterSelect').value;updateUserData('name',name);updateUserData('email',email);updateUserData('roll_number',rollNumber);updateUserData('branch',branch);updateUserData('semester',semester);});});
